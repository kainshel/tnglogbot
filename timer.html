<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover, maximum-scale=1.0, user-scalable=no"/>
  <title>–¢–∞–π–º–µ—Ä ¬∑ –î–Ω–µ–≤–Ω–∏–∫ –¢—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫</title>
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#1E90FF">
  <link rel="icon" href="icon.png">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  
<header class="mobile-topbar">
  <nav class="mobile-nav">
    <a href="index.html" class="nav-item"><span>üë§</span><small>–ü—Ä–æ—Ñ–∏–ª—å</small></a>
    <a href="exercises.html" class="nav-item"><span>üèãÔ∏è</span><small>–£–ø—Ä–∞–∂–Ω–µ–Ω–∏—è</small></a>
    <a href="workout.html" class="nav-item"><span>üìù</span><small>–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞</small></a>
    <a href="calendar.html" class="nav-item"><span>üóìÔ∏è</span><small>–ö–∞–ª–µ–Ω–¥–∞—Ä—å</small></a>
    <a href="stats.html" class="nav-item"><span>üìä</span><small>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</small></a>
    <a href="timer.html" class="nav-item active" class="nav-item"><span>‚è±Ô∏è</span><small>–¢–∞–π–º–µ—Ä</small></a>
  </nav>
</header>

  <main class="content">
    <header class="section-head"><h1>–¢–∞–π–º–µ—Ä</h1></header>
    <div class="container">
      
<div class="timer-wrap">
  <div class="timer-tabs">
    <button id="tab-timer" class="active">–¢–∞–π–º–µ—Ä</button>
    <button id="tab-stopwatch">–°–µ–∫—É–Ω–¥–æ–º–µ—Ä</button>
  </div>

  <div id="timer-section">
    <div class="timer-canvas">
      <svg viewBox="0 0 100 100">
        <circle cx="50" cy="50" r="45" stroke="#eee" stroke-width="10" fill="none"></circle>
        <circle id="progress" cx="50" cy="50" r="45" stroke="#1E90FF" stroke-width="10" fill="none" stroke-linecap="round" stroke-dasharray="282.743" stroke-dashoffset="0"></circle>
      </svg>
      <div class="time" id="timer-display">00:00</div>
    </div>
    <div class="timer-controls">
      <div class="row">
        <input type="number" id="minutes" placeholder="–ú–∏–Ω—É—Ç—ã" min="0">
        <input type="number" id="seconds" placeholder="–°–µ–∫—É–Ω–¥—ã" min="0" max="59">
      </div>
      <div class="row">
        <button id="timer-start">–°—Ç–∞—Ä—Ç</button>
        <button id="timer-pause">–ü–∞—É–∑–∞</button>
        <button id="timer-reset">–°–±—Ä–æ—Å</button>
      </div>
    </div>
  </div>

  <div id="stopwatch-section" style="display:none;">
    <div class="timer-canvas">
      <svg viewBox="0 0 100 100">
        <circle cx="50" cy="50" r="45" stroke="#eee" stroke-width="10" fill="none"></circle>
        <circle id="sw-progress" cx="50" cy="50" r="45" stroke="#1E90FF" stroke-width="10" fill="none" stroke-linecap="round" stroke-dasharray="282.743" stroke-dashoffset="282.743"></circle>
      </svg>
      <div class="time" id="stopwatch-display">00:00:00</div>
    </div>
    <div class="timer-controls">
      <div class="row">
        <button id="sw-start">–°—Ç–∞—Ä—Ç</button>
        <button id="sw-pause">–ü–∞—É–∑–∞</button>
        <button id="sw-reset">–°–±—Ä–æ—Å</button>
      </div>
    </div>
  </div>
</div>

<script>
const CIRC = 2*Math.PI*45; // circumference
const progress = document.getElementById('progress');
const swProgress = document.getElementById('sw-progress');

// Tabs
const tabTimer = document.getElementById('tab-timer');
const tabSW = document.getElementById('tab-stopwatch');
const timerSection = document.getElementById('timer-section');
const swSection = document.getElementById('stopwatch-section');
tabTimer.onclick = () => { tabTimer.classList.add('active'); tabSW.classList.remove('active'); timerSection.style.display='block'; swSection.style.display='none'; };
tabSW.onclick = () => { tabSW.classList.add('active'); tabTimer.classList.remove('active'); timerSection.style.display='none'; swSection.style.display='block'; };

// Timer
let timerInterval; let timerTotal=0; let timerRemain=0;
function setStrokeByRemain(){
  if (!timerTotal) { progress.style.strokeDashoffset = '0'; return; }
  const ratio = Math.max(0, timerRemain) / timerTotal;
  const offset = CIRC * (1 - ratio);
  progress.style.strokeDashoffset = String(offset);
  // color stages
  if (ratio > 0.5) progress.style.stroke = '#22c55e'; // green
  else if (ratio > 0.2) progress.style.stroke = '#f59e0b'; // amber
  else progress.style.stroke = '#ef4444'; // red
}
function updateTimerDisplay(){
  const m = String(Math.floor(timerRemain/60)).padStart(2,'0');
  const s = String(Math.max(0, timerRemain%60)).padStart(2,'0');
  document.getElementById('timer-display').textContent = m+':'+s;
  setStrokeByRemain();
}
document.getElementById('timer-start').onclick = () => {
  if (!timerInterval){
    if (timerRemain<=0){
      const m = parseInt(document.getElementById('minutes').value)||0;
      const s = parseInt(document.getElementById('seconds').value)||0;
      timerTotal = Math.max(1, m*60+s);
      timerRemain = timerTotal;
    }
    timerInterval = setInterval(()=>{
      timerRemain--;
      updateTimerDisplay();
      if (timerRemain<=0){ clearInterval(timerInterval); timerInterval=null; timerRemain=0; updateTimerDisplay(); try{ new AudioContext(); }catch(e){} alert('–í—Ä–µ–º—è –≤—ã—à–ª–æ!'); }
    }, 1000);
  }
};
document.getElementById('timer-pause').onclick = () => { clearInterval(timerInterval); timerInterval=null; };
document.getElementById('timer-reset').onclick = () => { clearInterval(timerInterval); timerInterval=null; timerRemain=0; timerTotal=0; updateTimerDisplay(); };

// Stopwatch
let swInterval; let swElapsed=0;
function updateSW(){
  const h = String(Math.floor(swElapsed/3600)).padStart(2,'0');
  const m = String(Math.floor((swElapsed%3600)/60)).padStart(2,'0');
  const s = String(swElapsed%60).padStart(2,'0');
  document.getElementById('stopwatch-display').textContent = h+':'+m+':'+s;
  const ratio = (swElapsed%60)/60;
  swProgress.style.strokeDashoffset = String(CIRC*(1-ratio));
  swProgress.style.stroke = '#1E90FF';
}
document.getElementById('sw-start').onclick = () => { if(!swInterval){ swInterval=setInterval(()=>{ swElapsed++; updateSW(); },1000);} };
document.getElementById('sw-pause').onclick = () => { clearInterval(swInterval); swInterval=null; };
document.getElementById('sw-reset').onclick = () => { clearInterval(swInterval); swInterval=null; swElapsed=0; updateSW(); };

updateTimerDisplay(); updateSW();
</script>

    </div>
  </main>
  <script>/* no desktop sidebar scripts */</script>
</body>
</html>