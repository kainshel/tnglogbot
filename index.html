<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>–ì–ª–∞–≤–Ω–∞—è ‚Äî –î–Ω–µ–≤–Ω–∏–∫ –¢—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫</title>
  <link rel="stylesheet" href="styles/main.css">
  <link rel="stylesheet" href="styles/responsive.css">
  <link rel="stylesheet" href="styles/dashboard.css">
  <script src="nav.js" defer></script>
  <script src="dashboard.js" defer></script>
  <link rel="manifest" href="manifest.json">
</head>
<body>

<button id="burger" class="burger" aria-label="–û—Ç–∫—Ä—ã—Ç—å –º–µ–Ω—é" aria-controls="sidebar" aria-expanded="false">
  <span></span><span></span><span></span>
</button>
<div id="backdrop" class="backdrop" hidden></div>

<div class="app">
  <aside id="sidebar" class="sidebar">
    <div class="brand">–î–Ω–µ–≤–Ω–∏–∫ –¢—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫</div>
    <nav role="navigation" aria-label="Main" class="nav">
      <a class="active" href="index.html">–ì–ª–∞–≤–Ω–∞—è</a>
      <a href="exercises.html">–£–ø—Ä–∞–∂–Ω–µ–Ω–∏—è</a>
      <a href="workout.html">–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞</a>
      <a href="history.html">–ò—Å—Ç–æ—Ä–∏—è</a>
      <a href="profile.html">–ü—Ä–æ—Ñ–∏–ª—å</a>
    </nav>
  </aside>
  
  <main class="content">
    <!-- –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –∏ –±—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è -->
    <section class="welcome-section">
      <h1>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, <span id="user-name">–°–ø–æ—Ä—Ç—Å–º–µ–Ω</span>!</h1>
      <p>–û—Ç—Å–ª–µ–∂–∏–≤–∞–π—Ç–µ —Å–≤–æ–∏ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ –∏ –¥–æ—Å—Ç–∏–≥–∞–π—Ç–µ —Ü–µ–ª–µ–π</p>
      
      <div class="quick-actions">
        <a href="workout.html" class="btn primary">‚ûï –ù–∞—á–∞—Ç—å —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É</a>
        <a href="exercises.html" class="btn secondary">üìã –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–π</a>
      </div>
    </section>

    <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ –ø—Ä–æ–≥—Ä–µ—Å—Å -->
    <section class="stats-grid">
      <div class="stat-card">
        <div class="stat-icon">üèãÔ∏è</div>
        <div class="stat-info">
          <span class="stat-number" id="total-workouts">0</span>
          <span class="stat-label">–¢—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫ –≤—Å–µ–≥–æ</span>
        </div>
      </div>
      
      <div class="stat-card">
        <div class="stat-icon">üî•</div>
        <div class="stat-info">
          <span class="stat-number" id="week-workouts">0</span>
          <span class="stat-label">–ù–∞ —ç—Ç–æ–π –Ω–µ–¥–µ–ª–µ</span>
        </div>
      </div>
      
      <div class="stat-card">
        <div class="stat-icon">üí™</div>
        <div class="stat-info">
          <span class="stat-number" id="total-exercises">0</span>
          <span class="stat-label">–£–ø—Ä–∞–∂–Ω–µ–Ω–∏–π</span>
        </div>
      </div>
      
      <div class="stat-card">
        <div class="stat-icon">üìÖ</div>
        <div class="stat-info">
          <span class="stat-number" id="last-workout">‚Äî</span>
          <span class="stat-label">–ü–æ—Å–ª–µ–¥–Ω—è—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞</span>
        </div>
      </div>
    </section>

    <!-- –ü—Ä–µ–¥—Å—Ç–æ—è—â–∏–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏/–Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è -->
    <section class="card">
      <h2>–ë–ª–∏–∂–∞–π—à–∏–µ –ø–ª–∞–Ω—ã</h2>
      <div id="upcoming-workouts">
        <p class="empty-state">–£ –≤–∞—Å –Ω–µ—Ç –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫</p>
      </div>
      <a href="workout.html" class="btn">–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É</a>
    </section>

    <!-- –ù–µ–¥–∞–≤–Ω–∏–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ -->
    <section class="card">
      <h2>–ù–µ–¥–∞–≤–Ω–∏–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏</h2>
      <div id="recent-workouts">
        <p class="empty-state">–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã—Ö —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫</p>
      </div>
      <a href="history.html" class="btn">–í—Å—è –∏—Å—Ç–æ—Ä–∏—è</a>
    </section>

    <!-- –ë—ã—Å—Ç—Ä—ã–π –¥–æ—Å—Ç—É–ø –∫ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è–º -->
    <section class="card">
      <h2>–ß–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è</h2>
      <div id="favorite-exercises" class="exercise-mini-grid">
        <p class="empty-state">–î–æ–±–∞–≤—å—Ç–µ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ</p>
      </div>
      <a href="exercises.html" class="btn">–í—Å–µ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è</a>
    </section>
  </main>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
  // –ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  loadUserStats();
  loadRecentWorkouts();
  loadFavoriteExercises();
  
  // –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Telegram Web App
  initializeTelegramAuth();
});

function loadUserStats() {
  // –ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∏–∑ localStorage
  const stats = JSON.parse(localStorage.getItem('userStats')) || {};
  
  document.getElementById('total-workouts').textContent = stats.totalWorkouts || 0;
  document.getElementById('week-workouts').textContent = stats.weekWorkouts || 0;
  document.getElementById('total-exercises').textContent = stats.totalExercises || 0;
  document.getElementById('last-workout').textContent = stats.lastWorkout || '‚Äî';
}

function loadRecentWorkouts() {
  // –ó–∞–≥—Ä—É–∑–∫–∞ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫
  const workouts = JSON.parse(localStorage.getItem('workoutHistory')) || [];
  const container = document.getElementById('recent-workouts');
  
  if (workouts.length === 0) return;
  
  container.innerHTML = '';
  workouts.slice(0, 3).forEach(workout => {
    const workoutEl = document.createElement('div');
    workoutEl.className = 'workout-item';
    workoutEl.innerHTML = `
      <strong>${workout.date}</strong>
      <span>${workout.exercises.length} —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–π</span>
    `;
    container.appendChild(workoutEl);
  });
}

function initializeTelegramAuth() {
  if (typeof Telegram !== 'undefined') {
    const tg = window.Telegram.WebApp;
    const user = tg.initDataUnsafe.user;
    
    if (user) {
      const userName = `${user.first_name || ''} ${user.last_name || ''}`.trim();
      document.getElementById('user-name').textContent = userName || '–°–ø–æ—Ä—Ç—Å–º–µ–Ω';
    }
  }
}
</script>

</body>
</html>