<!doctype html>
<html lang="ru" class="theme-system">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>GymKeeper - Дневник тренировок</title>
  <meta name="description" content="Приложение для отслеживания тренировок и прогресса">
  <link rel="stylesheet" href="styles.css" />
  <link rel="manifest" href="manifest.json" />
  <link rel="icon" href="favicon.ico" sizes="any">
  <link rel="icon" href="icon.svg" type="image/svg+xml">
  <link rel="apple-touch-icon" href="apple-touch-icon.png">
  <meta name="theme-color" content="#8FAF8F">
</head>
<body>
  <div id="app" class="shell">
    <!-- Sidebar overlay -->
    <aside class="sidebar" id="sidebar" aria-hidden="true">
      <div class="sidebar__panel">
        <header class="sidebar__head">
          <div class="app-logo">GK</div>
          <div class="app-title">GymKeeper</div>
          <button class="icon-btn close" id="closeSidebar" aria-label="Закрыть меню">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M18 6L6 18M6 6l12 12"/>
            </svg>
          </button>
        </header>
        <nav class="nav">
          <button class="nav-item active" data-view="exercises">
            <svg class="icon" width="20" height="20" viewBox="0 0 24 24">
              <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
              <path d="M14 2v6h6M16 13H8M16 17H8M10 9H8"/>
            </svg>
            <span>Упражнения</span>
          </button>
          <button class="nav-item" data-view="workout">
            <svg class="icon" width="20" height="20" viewBox="0 0 24 24">
              <path d="M22 12h-4l-3 9L9 3l-3 9H2"/>
            </svg>
            <span>Тренировка</span>
          </button>
          <button class="nav-item" data-view="calendar">
            <svg class="icon" width="20" height="20" viewBox="0 0 24 24">
              <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
              <path d="M16 2v4M8 2v4M3 10h18"/>
            </svg>
            <span>Календарь</span>
          </button>
          <button class="nav-item" data-view="stats">
            <svg class="icon" width="20" height="20" viewBox="0 0 24 24">
              <path d="M18 20V10M12 20V4M6 20v-6"/>
            </svg>
            <span>Статистика</span>
          </button>
        </nav>
        <div class="sidebar__settings">
          <button class="theme-toggle" id="themeToggle" aria-label="Переключить тему">
            <svg class="icon-sun" width="20" height="20" viewBox="0 0 24 24">
              <circle cx="12" cy="12" r="5"/><path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"/>
            </svg>
            <svg class="icon-moon" width="20" height="20" viewBox="0 0 24 24">
              <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
            </svg>
          </button>
        </div>
        <footer class="sidebar__foot">
          <div class="muted">v3.0.0</div>
        </footer>
      </div>
      <div class="sidebar__dim" id="closeSidebarDim" aria-hidden="true"></div>
    </aside>

    <!-- Topbar -->
    <header class="topbar">
      <button class="icon-btn burger" id="openSidebar" aria-label="Открыть меню">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M3 12h18M3 6h18M3 18h18"/>
        </svg>
      </button>
      <h1 class="title" id="view-title">Упражнения</h1>
      <div class="topbar-actions">
        <button id="add-exercise-btn" class="icon-btn" aria-label="Добавить упражнение">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M12 5v14M5 12h14"/>
          </svg>
        </button>
      </div>
    </header>

    <!-- Main -->
    <main class="main">
      <!-- EXERCISES -->
      <section class="view" id="view-exercises">
        <div class="panel">
          <div class="panel-head">
            <div class="search-bar">
              <svg class="search-icon" width="18" height="18" viewBox="0 0 24 24">
                <circle cx="11" cy="11" r="8"/><path d="m21 21-4.35-4.35"/>
              </svg>
              <input type="search" id="exercise-search" placeholder="Поиск упражнений..." />
              <select id="exercise-filter" aria-label="Фильтр по группам мышц">
                <option value="">Все группы</option>
              </select>
            </div>
          </div>
          <div class="panel-body">
            <div id="exercise-list" class="exercise-grid"></div>
          </div>
        </div>
      </section>

      <!-- WORKOUT -->
      <section class="view hidden" id="view-workout">
        <div class="panel">
          <div class="panel-head">
            <h2>Новая тренировка</h2>
            <div class="form-grid">
              <label class="field">
                <span>Дата</span>
                <input type="date" id="workout-date" value="" />
              </label>
              <label class="field">
                <span>Название</span>
                <input type="text" id="workout-name" placeholder="Например: Грудь и трицепс" />
              </label>
            </div>
          </div>
          <div class="panel-body">
            <div id="workout-exercises" class="workout-exercises">
              <div class="empty-state">
                <img src="empty-workout.svg" alt="" width="120" height="120" />
                <h3>Нет упражнений</h3>
                <p>Добавьте упражнения из списка</p>
              </div>
            </div>
          </div>
          <div class="panel-foot sticky-foot">
            <button class="btn ghost" id="clear-workout">Очистить</button>
            <button class="btn accent" id="save-workout" disabled>Сохранить тренировку</button>
          </div>
        </div>
      </section>

      <!-- CALENDAR -->
      <section class="view hidden" id="view-calendar">
        <div class="panel">
          <div class="panel-head">
            <h2>Календарь тренировок</h2>
            <div class="calendar-nav">
              <button class="icon-btn" id="cal-prev" aria-label="Предыдущий месяц">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M15 18l-6-6 6-6"/>
                </svg>
              </button>
              <h3 id="cal-title" class="cal-title"></h3>
              <button class="icon-btn" id="cal-next" aria-label="Следующий месяц">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                  <path d="M9 18l6-6-6-6"/>
                </svg>
              </button>
            </div>
          </div>
          <div class="panel-body">
            <div class="calendar-grid" id="calendar-grid"></div>
            <div id="calendar-detail" class="calendar-detail">
              <div class="empty-state">
                <img src="empty-calendar.svg" alt="" width="120" height="120" />
                <h3>Выберите дату</h3>
                <p>Просмотр тренировок за выбранный день</p>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- STATS -->
      <section class="view hidden" id="view-stats">
        <div class="panel">
          <div class="panel-head">
            <h2>Статистика</h2>
            <div class="stats-period">
              <select id="stats-period">
                <option value="7">Неделя</option>
                <option value="30" selected>Месяц</option>
                <option value="90">3 месяца</option>
                <option value="365">Год</option>
                <option value="0">Все время</option>
              </select>
            </div>
          </div>
          <div class="panel-body">
            <div class="stats-cards">
              <div class="stat-card">
                <div class="stat-value" id="stat-workouts">0</div>
                <div class="stat-label">Тренировки</div>
              </div>
              <div class="stat-card">
                <div class="stat-value" id="stat-volume">0</div>
                <div class="stat-label">Общий объем</div>
              </div>
              <div class="stat-card">
                <div class="stat-value" id="stat-exercises">0</div>
                <div class="stat-label">Упражнения</div>
              </div>
            </div>
            <canvas id="stats-chart" width="900" height="300"></canvas>
            <div class="stats-top">
              <h3>Топ упражнений</h3>
              <div id="stats-top-exercises" class="top-exercises"></div>
            </div>
          </div>
        </div>
      </section>
    </main>
  </div>

  <!-- Toast notifications -->
  <div id="toast" class="toast" role="status" aria-live="polite"></div>

  <!-- Empty templates -->
  <template id="exercise-card-template">
    <div class="exercise-card" data-id="">
      <div class="exercise-thumb">
        <img src="" alt="" loading="lazy" />
      </div>
      <div class="exercise-name"></div>
      <div class="exercise-muscle-group"></div>
    </div>
  </template>

  <template id="workout-exercise-template">
    <div class="workout-exercise" data-id="">
      <div class="workout-exercise-header">
        <h4 class="exercise-name"></h4>
        <button class="icon-btn remove-exercise" aria-label="Удалить упражнение">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M18 6L6 18M6 6l12 12"/>
          </svg>
        </button>
      </div>
      <div class="workout-sets"></div>
      <button class="btn add-set">+ Добавить подход</button>
    </div>
  </template>

  <template id="workout-set-template">
    <div class="workout-set">
      <div class="set-number"></div>
      <input type="number" min="0" step="0.5" placeholder="Вес" class="set-weight" />
      <span class="units">кг</span>
      <input type="number" min="1" placeholder="Повторы" class="set-reps" />
      <button class="icon-btn remove-set" aria-label="Удалить подход">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M18 6L6 18M6 6l12 12"/>
        </svg>
      </button>
    </div>
  </template>

  <script src="app.js" type="module"></script>
</body>
</html>